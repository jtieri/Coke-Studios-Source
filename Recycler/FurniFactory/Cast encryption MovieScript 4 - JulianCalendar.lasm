on julianCalendarEncode inDate
  [  0] getparam 0 .............................. <inDate>
  [  2] pusharglist 1 ........................... <inDate>
  [  4] objcall 80 .............................. <inDate.getFullYear()>
  [  6] setlocal 0 .............................. y = inDate.getFullYear()
  [  8] getparam 0 .............................. <inDate>
  [ 10] pusharglist 1 ........................... <inDate>
  [ 12] objcall 81 .............................. <inDate.getMonth()>
  [ 14] setlocal 1 .............................. m = inDate.getMonth()
  [ 16] getparam 0 .............................. <inDate>
  [ 18] pusharglist 1 ........................... <inDate>
  [ 20] objcall 82 .............................. <inDate.getDate()>
  [ 22] setlocal 2 .............................. d = inDate.getDate()
  [ 24] getparam 0 .............................. <inDate>
  [ 26] pusharglist 1 ........................... <inDate>
  [ 28] objcall 83 .............................. <inDate.getHours()>
  [ 30] setlocal 3 .............................. h = inDate.getHours()
  [ 32] getparam 0 .............................. <inDate>
  [ 34] pusharglist 1 ........................... <inDate>
  [ 36] objcall 84 .............................. <inDate.getMinutes()>
  [ 38] setlocal 4 .............................. mn = inDate.getMinutes()
  [ 40] getparam 0 .............................. <inDate>
  [ 42] pusharglist 1 ........................... <inDate>
  [ 44] objcall 85 .............................. <inDate.getSeconds()>
  [ 46] setlocal 5 .............................. s = inDate.getSeconds()
  [ 48] pushcons 0 .............................. <"Math">
  [ 50] pusharglist 1 ........................... <"Math">
  [ 52] extcall 86 .............................. <newObject("Math")>
  [ 54] setlocal 6 .............................. Math = newObject("Math")
  [ 56] getlocal 1 .............................. <m>
  [ 58] pushint8 2 .............................. <2>
  [ 60] gt ...................................... <m > 2>
  [ 61] jmpifz [ 78] ............................ if m > 2 then / else
  [ 64] getlocal 0 .............................. <y>
  [ 66] setlocal 7 .............................. jy = y
  [ 68] getlocal 1 .............................. <m>
  [ 70] pushint8 1 .............................. <1>
  [ 72] add ..................................... <m + 1>
  [ 73] setlocal 8 .............................. jm = m + 1
  [ 75] jmp [ 92]
  [ 78] getlocal 0 .............................. <y>
  [ 80] pushint8 1 .............................. <1>
  [ 82] sub ..................................... <y - 1>
  [ 83] setlocal 7 .............................. jy = y - 1
  [ 85] getlocal 1 .............................. <m>
  [ 87] pushint8 13 ............................. <13>
  [ 89] add ..................................... <m + 13>
  [ 90] setlocal 8 .............................. jm = m + 13
  [ 92] getlocal 6 .............................. <Math>
  [ 94] getlocal 6 .............................. <Math>
  [ 96] pushfloat32 365.25 ...................... <365.25>
  [101] getlocal 7 .............................. <jy>
  [103] mul ..................................... <365.25 * jy>
  [104] pusharglist 2 ........................... <Math, 365.25 * jy>
  [106] objcall 87 .............................. <Math.floor(365.25 * jy)>
  [108] getlocal 6 .............................. <Math>
  [110] pushcons 1 .............................. <30.60010000000000119>
  [112] getlocal 8 .............................. <jm>
  [114] mul ..................................... <30.60010000000000119 * jm>
  [115] pusharglist 2 ........................... <Math, 30.60010000000000119 * jm>
  [117] objcall 87 .............................. <Math.floor(30.60010000000000119 * jm)>
  [119] add ..................................... <Math.floor(365.25 * jy) + Math.floor(30.60010000000000119 * jm)>
  [120] getlocal 2 .............................. <d>
  [122] add ..................................... <Math.floor(365.25 * jy) + Math.floor(30.60010000000000119 * jm) + d>
  [123] pushint32 1720995 ....................... <1720995>
  [128] add ..................................... <Math.floor(365.25 * jy) + Math.floor(30.60010000000000119 * jm) + d + 1720995>
  [129] pusharglist 2 ........................... <Math, Math.floor(365.25 * jy) + Math.floor(30.60010000000000119 * jm) + d + 1720995>
  [131] objcall 87 .............................. <Math.floor(Math.floor(365.25 * jy) + Math.floor(30.60010000000000119 * jm) + d + 1720995)>
  [133] setlocal 9 .............................. intgr = Math.floor(Math.floor(365.25 * jy) + Math.floor(30.60010000000000119 * jm) + d + 1720995)
  [135] pushint8 15 ............................. <15>
  [137] pushint8 31 ............................. <31>
  [139] pushint8 10 ............................. <10>
  [141] pushint8 12 ............................. <12>
  [143] pushint16 1582 .......................... <1582>
  [146] mul ..................................... <12 * 1582>
  [147] add ..................................... <10 + (12 * 1582)>
  [148] mul ..................................... <31 * (10 + (12 * 1582))>
  [149] add ..................................... <15 + (31 * (10 + (12 * 1582)))>
  [150] setlocal 10 ............................. gregcal = 15 + (31 * (10 + (12 * 1582)))
  [152] getlocal 6 .............................. <Math>
  [154] pushcons 2 .............................. <0.01>
  [156] getlocal 7 .............................. <jy>
  [158] mul ..................................... <0.01 * jy>
  [159] pusharglist 2 ........................... <Math, 0.01 * jy>
  [161] objcall 87 .............................. <Math.floor(0.01 * jy)>
  [163] setlocal 11 ............................. ja = Math.floor(0.01 * jy)
  [165] getlocal 9 .............................. <intgr>
  [167] pushint8 2 .............................. <2>
  [169] add ..................................... <intgr + 2>
  [170] getlocal 11 ............................. <ja>
  [172] sub ..................................... <intgr + 2 - ja>
  [173] getlocal 6 .............................. <Math>
  [175] pushfloat32 0.25 ........................ <0.25>
  [180] getlocal 11 ............................. <ja>
  [182] mul ..................................... <0.25 * ja>
  [183] pusharglist 2 ........................... <Math, 0.25 * ja>
  [185] objcall 87 .............................. <Math.floor(0.25 * ja)>
  [187] add ..................................... <intgr + 2 - ja + Math.floor(0.25 * ja)>
  [188] setlocal 9 .............................. intgr = intgr + 2 - ja + Math.floor(0.25 * ja)
  [190] getlocal 3 .............................. <h>
  [192] pushfloat32 24.0 ........................ <24.0>
  [197] div ..................................... <h / 24.0>
  [198] pushfloat32 0.5 ......................... <0.5>
  [203] sub ..................................... <(h / 24.0) - 0.5>
  [204] setlocal 12 ............................. dayfrac = (h / 24.0) - 0.5
  [206] getlocal 12 ............................. <dayfrac>
  [208] pushfloat32 0.0 ......................... <0.0>
  [213] lt ...................................... <dayfrac < 0.0>
  [214] jmpifz [227] ............................ if dayfrac < 0.0 then
  [217] getlocal 12 ............................. <dayfrac>
  [219] pushfloat32 1.0 ......................... <1.0>
  [224] add ..................................... <dayfrac + 1.0>
  [225] setlocal 12 ............................. dayfrac = dayfrac + 1.0
  [227] getlocal 12 ............................. <dayfrac>
  [229] getlocal 4 .............................. <mn>
  [231] getlocal 5 .............................. <s>
  [233] pushfloat32 60.0 ........................ <60.0>
  [238] div ..................................... <s / 60.0>
  [239] add ..................................... <mn + (s / 60.0)>
  [240] pushfloat32 60.0 ........................ <60.0>
  [245] div ..................................... <(mn + (s / 60.0)) / 60.0>
  [246] pushfloat32 24.0 ........................ <24.0>
  [251] div ..................................... <(mn + (s / 60.0)) / 60.0 / 24.0>
  [252] add ..................................... <dayfrac + ((mn + (s / 60.0)) / 60.0 / 24.0)>
  [253] setlocal 13 ............................. frac = dayfrac + ((mn + (s / 60.0)) / 60.0 / 24.0)
  [255] getlocal 9 .............................. <intgr>
  [257] getlocal 13 ............................. <frac>
  [259] add ..................................... <intgr + frac>
  [260] pushint32 100000 ........................ <100000>
  [265] mul ..................................... <(intgr + frac) * 100000>
  [266] setlocal 14 ............................. jd0 = (intgr + frac) * 100000
  [268] getlocal 6 .............................. <Math>
  [270] getlocal 14 ............................. <jd0>
  [272] pusharglist 2 ........................... <Math, jd0>
  [274] objcall 87 .............................. <Math.floor(jd0)>
  [276] setlocal 15 ............................. jd = Math.floor(jd0)
  [278] getlocal 14 ............................. <jd0>
  [280] getlocal 15 ............................. <jd>
  [282] sub ..................................... <jd0 - jd>
  [283] pushfloat32 0.5 ......................... <0.5>
  [288] gt ...................................... <(jd0 - jd) > 0.5>
  [289] jmpifz [299] ............................ if (jd0 - jd) > 0.5 then
  [292] getlocal 15 ............................. <jd>
  [294] pushint8 1 .............................. <1>
  [296] add ..................................... <jd + 1>
  [297] setlocal 15 ............................. jd = jd + 1
  [299] getlocal 15 ............................. <jd>
  [301] pushint32 100000 ........................ <100000>
  [306] div ..................................... <jd / 100000>
  [307] pusharglistnoret 1 ...................... <jd / 100000>
  [309] extcall 18 .............................. return jd / 100000
  [311] ret
end

on julianCalendarDecode jd
  [  0] pushcons 0 .............................. <"Math">
  [  2] pusharglist 1 ........................... <"Math">
  [  4] extcall 86 .............................. <newObject("Math")>
  [  6] setlocal 0 .............................. Math = newObject("Math")
  [  8] getlocal 0 .............................. <Math>
  [ 10] getparam 0 .............................. <jd>
  [ 12] pusharglist 2 ........................... <Math, jd>
  [ 14] objcall 87 .............................. <Math.floor(jd)>
  [ 16] setlocal 1 .............................. intgr = Math.floor(jd)
  [ 18] getparam 0 .............................. <jd>
  [ 20] getlocal 1 .............................. <intgr>
  [ 22] sub ..................................... <jd - intgr>
  [ 23] setlocal 2 .............................. frac = jd - intgr
  [ 25] pushfloat32 2299160.5 ................... <2299160.5>
  [ 30] setlocal 3 .............................. gregjd = 2299160.5
  [ 32] getlocal 0 .............................. <Math>
  [ 34] getlocal 1 .............................. <intgr>
  [ 36] pushfloat32 1867216.0 ................... <1867216.0>
  [ 41] sub ..................................... <intgr - 1867216.0>
  [ 42] pushfloat32 0.25 ........................ <0.25>
  [ 47] sub ..................................... <intgr - 1867216.0 - 0.25>
  [ 48] pushfloat32 36524.25 .................... <36524.25>
  [ 53] div ..................................... <(intgr - 1867216.0 - 0.25) / 36524.25>
  [ 54] pusharglist 2 ........................... <Math, (intgr - 1867216.0 - 0.25) / 36524.25>
  [ 56] objcall 87 .............................. <Math.floor((intgr - 1867216.0 - 0.25) / 36524.25)>
  [ 58] setlocal 4 .............................. tmp = Math.floor((intgr - 1867216.0 - 0.25) / 36524.25)
  [ 60] getlocal 1 .............................. <intgr>
  [ 62] pushint8 1 .............................. <1>
  [ 64] add ..................................... <intgr + 1>
  [ 65] getlocal 4 .............................. <tmp>
  [ 67] add ..................................... <intgr + 1 + tmp>
  [ 68] getlocal 0 .............................. <Math>
  [ 70] pushfloat32 0.25 ........................ <0.25>
  [ 75] getlocal 4 .............................. <tmp>
  [ 77] mul ..................................... <0.25 * tmp>
  [ 78] pusharglist 2 ........................... <Math, 0.25 * tmp>
  [ 80] objcall 87 .............................. <Math.floor(0.25 * tmp)>
  [ 82] sub ..................................... <intgr + 1 + tmp - Math.floor(0.25 * tmp)>
  [ 83] setlocal 5 .............................. j1 = intgr + 1 + tmp - Math.floor(0.25 * tmp)
  [ 85] getlocal 2 .............................. <frac>
  [ 87] pushfloat32 0.5 ......................... <0.5>
  [ 92] add ..................................... <frac + 0.5>
  [ 93] setlocal 6 .............................. df = frac + 0.5
  [ 95] getlocal 6 .............................. <df>
  [ 97] pushfloat32 1.0 ......................... <1.0>
  [102] gteq .................................... <df >= 1.0>
  [103] jmpifz [123] ............................ if df >= 1.0 then
  [106] getlocal 6 .............................. <df>
  [108] pushfloat32 1.0 ......................... <1.0>
  [113] sub ..................................... <df - 1.0>
  [114] setlocal 6 .............................. df = df - 1.0
  [116] getlocal 5 .............................. <j1>
  [118] pushint8 1 .............................. <1>
  [120] add ..................................... <j1 + 1>
  [121] setlocal 5 .............................. j1 = j1 + 1
  [123] getlocal 5 .............................. <j1>
  [125] pushfloat32 1524.0 ...................... <1524.0>
  [130] add ..................................... <j1 + 1524.0>
  [131] setlocal 7 .............................. j2 = j1 + 1524.0
  [133] getlocal 0 .............................. <Math>
  [135] pushfloat32 6680.0 ...................... <6680.0>
  [140] getlocal 7 .............................. <j2>
  [142] pushfloat32 2439870.0 ................... <2439870.0>
  [147] sub ..................................... <j2 - 2439870.0>
  [148] pushcons 3 .............................. <122.09999999999999432>
  [150] sub ..................................... <j2 - 2439870.0 - 122.09999999999999432>
  [151] pushfloat32 365.25 ...................... <365.25>
  [156] div ..................................... <(j2 - 2439870.0 - 122.09999999999999432) / 365.25>
  [157] add ..................................... <6680.0 + ((j2 - 2439870.0 - 122.09999999999999432) / 365.25)>
  [158] pusharglist 2 ........................... <Math, 6680.0 + ((j2 - 2439870.0 - 122.09999999999999432) / 365.25)>
  [160] objcall 87 .............................. <Math.floor(6680.0 + ((j2 - 2439870.0 - 122.09999999999999432) / 365.25))>
  [162] setlocal 8 .............................. j3 = Math.floor(6680.0 + ((j2 - 2439870.0 - 122.09999999999999432) / 365.25))
  [164] getlocal 0 .............................. <Math>
  [166] getlocal 8 .............................. <j3>
  [168] pushfloat32 365.25 ...................... <365.25>
  [173] mul ..................................... <j3 * 365.25>
  [174] pusharglist 2 ........................... <Math, j3 * 365.25>
  [176] objcall 87 .............................. <Math.floor(j3 * 365.25)>
  [178] setlocal 9 .............................. j4 = Math.floor(j3 * 365.25)
  [180] getlocal 0 .............................. <Math>
  [182] getlocal 7 .............................. <j2>
  [184] getlocal 9 .............................. <j4>
  [186] sub ..................................... <j2 - j4>
  [187] pushcons 1 .............................. <30.60010000000000119>
  [189] div ..................................... <(j2 - j4) / 30.60010000000000119>
  [190] pusharglist 2 ........................... <Math, (j2 - j4) / 30.60010000000000119>
  [192] objcall 87 .............................. <Math.floor((j2 - j4) / 30.60010000000000119)>
  [194] setlocal 10 ............................. j5 = Math.floor((j2 - j4) / 30.60010000000000119)
  [196] getlocal 0 .............................. <Math>
  [198] getlocal 7 .............................. <j2>
  [200] getlocal 9 .............................. <j4>
  [202] sub ..................................... <j2 - j4>
  [203] getlocal 0 .............................. <Math>
  [205] getlocal 10 ............................. <j5>
  [207] pushcons 1 .............................. <30.60010000000000119>
  [209] mul ..................................... <j5 * 30.60010000000000119>
  [210] pusharglist 2 ........................... <Math, j5 * 30.60010000000000119>
  [212] objcall 87 .............................. <Math.floor(j5 * 30.60010000000000119)>
  [214] sub ..................................... <j2 - j4 - Math.floor(j5 * 30.60010000000000119)>
  [215] pusharglist 2 ........................... <Math, j2 - j4 - Math.floor(j5 * 30.60010000000000119)>
  [217] objcall 87 .............................. <Math.floor(j2 - j4 - Math.floor(j5 * 30.60010000000000119))>
  [219] setlocal 11 ............................. d = Math.floor(j2 - j4 - Math.floor(j5 * 30.60010000000000119))
  [221] getlocal 0 .............................. <Math>
  [223] getlocal 10 ............................. <j5>
  [225] pushfloat32 1.0 ......................... <1.0>
  [230] sub ..................................... <j5 - 1.0>
  [231] pusharglist 2 ........................... <Math, j5 - 1.0>
  [233] objcall 87 .............................. <Math.floor(j5 - 1.0)>
  [235] setlocal 12 ............................. m = Math.floor(j5 - 1.0)
  [237] getlocal 12 ............................. <m>
  [239] pushint8 12 ............................. <12>
  [241] gt ...................................... <m > 12>
  [242] jmpifz [252] ............................ if m > 12 then
  [245] getlocal 12 ............................. <m>
  [247] pushint8 12 ............................. <12>
  [249] sub ..................................... <m - 12>
  [250] setlocal 12 ............................. m = m - 12
  [252] getlocal 0 .............................. <Math>
  [254] getlocal 8 .............................. <j3>
  [256] pushfloat32 4715.0 ...................... <4715.0>
  [261] sub ..................................... <j3 - 4715.0>
  [262] pusharglist 2 ........................... <Math, j3 - 4715.0>
  [264] objcall 87 .............................. <Math.floor(j3 - 4715.0)>
  [266] setlocal 13 ............................. y = Math.floor(j3 - 4715.0)
  [268] getlocal 12 ............................. <m>
  [270] pushint8 2 .............................. <2>
  [272] gt ...................................... <m > 2>
  [273] jmpifz [276] ............................ if m > 2 then
  [276] getlocal 13 ............................. <y>
  [278] pushzero ................................ <0>
  [279] lteq .................................... <y <= 0>
  [280] jmpifz [283] ............................ if y <= 0 then
  [283] getlocal 0 .............................. <Math>
  [285] getlocal 6 .............................. <df>
  [287] pushfloat32 24.0 ........................ <24.0>
  [292] mul ..................................... <df * 24.0>
  [293] pusharglist 2 ........................... <Math, df * 24.0>
  [295] objcall 87 .............................. <Math.floor(df * 24.0)>
  [297] setlocal 14 ............................. hr = Math.floor(df * 24.0)
  [299] getlocal 0 .............................. <Math>
  [301] getlocal 6 .............................. <df>
  [303] pushfloat32 24.0 ........................ <24.0>
  [308] mul ..................................... <df * 24.0>
  [309] getlocal 14 ............................. <hr>
  [311] sub ..................................... <(df * 24.0) - hr>
  [312] pushfloat32 60.0 ........................ <60.0>
  [317] mul ..................................... <((df * 24.0) - hr) * 60.0>
  [318] pusharglist 2 ........................... <Math, ((df * 24.0) - hr) * 60.0>
  [320] objcall 87 .............................. <Math.floor(((df * 24.0) - hr) * 60.0)>
  [322] setlocal 15 ............................. mn = Math.floor(((df * 24.0) - hr) * 60.0)
  [324] getlocal 6 .............................. <df>
  [326] pushfloat32 24.0 ........................ <24.0>
  [331] mul ..................................... <df * 24.0>
  [332] getlocal 14 ............................. <hr>
  [334] sub ..................................... <(df * 24.0) - hr>
  [335] pushfloat32 60.0 ........................ <60.0>
  [340] mul ..................................... <((df * 24.0) - hr) * 60.0>
  [341] getlocal 15 ............................. <mn>
  [343] sub ..................................... <(((df * 24.0) - hr) * 60.0) - mn>
  [344] pushfloat32 60.0 ........................ <60.0>
  [349] mul ..................................... <((((df * 24.0) - hr) * 60.0) - mn) * 60.0>
  [350] setlocal 16 ............................. f = ((((df * 24.0) - hr) * 60.0) - mn) * 60.0
  [352] getlocal 0 .............................. <Math>
  [354] getlocal 16 ............................. <f>
  [356] pusharglist 2 ........................... <Math, f>
  [358] objcall 87 .............................. <Math.floor(f)>
  [360] setlocal 17 ............................. sc = Math.floor(f)
  [362] getlocal 16 ............................. <f>
  [364] getlocal 17 ............................. <sc>
  [366] sub ..................................... <f - sc>
  [367] setlocal 16 ............................. f = f - sc
  [369] getlocal 16 ............................. <f>
  [371] pushfloat32 0.5 ......................... <0.5>
  [376] gt ...................................... <f > 0.5>
  [377] jmpifz [387] ............................ if f > 0.5 then
  [380] getlocal 17 ............................. <sc>
  [382] pushint8 1 .............................. <1>
  [384] add ..................................... <sc + 1>
  [385] setlocal 17 ............................. sc = sc + 1
  [387] getlocal 17 ............................. <sc>
  [389] pushint8 60 ............................. <60>
  [391] eq ...................................... <sc = 60>
  [392] jmpifz [405] ............................ if sc = 60 then
  [395] pushzero ................................ <0>
  [396] setlocal 17 ............................. sc = 0
  [398] getlocal 15 ............................. <mn>
  [400] pushint8 1 .............................. <1>
  [402] add ..................................... <mn + 1>
  [403] setlocal 15 ............................. mn = mn + 1
  [405] getlocal 15 ............................. <mn>
  [407] pushint8 60 ............................. <60>
  [409] eq ...................................... <mn = 60>
  [410] jmpifz [423] ............................ if mn = 60 then
  [413] pushzero ................................ <0>
  [414] setlocal 15 ............................. mn = 0
  [416] getlocal 14 ............................. <hr>
  [418] pushint8 1 .............................. <1>
  [420] add ..................................... <hr + 1>
  [421] setlocal 14 ............................. hr = hr + 1
  [423] getlocal 14 ............................. <hr>
  [425] pushint8 24 ............................. <24>
  [427] eq ...................................... <hr = 24>
  [428] jmpifz [441] ............................ if hr = 24 then
  [431] pushzero ................................ <0>
  [432] setlocal 14 ............................. hr = 0
  [434] getlocal 11 ............................. <d>
  [436] pushint8 1 .............................. <1>
  [438] add ..................................... <d + 1>
  [439] setlocal 11 ............................. d = d + 1
  [441] pushcons 4 .............................. <"Date">
  [443] pusharglist 1 ........................... <"Date">
  [445] extcall 86 .............................. <newObject("Date")>
  [447] setlocal 18 ............................. oDateOut = newObject("Date")
  [449] getlocal 18 ............................. <oDateOut>
  [451] getlocal 13 ............................. <y>
  [453] pusharglistnoret 2 ...................... <oDateOut, y>
  [455] objcall 104 ............................. oDateOut.setYear(y)
  [457] getlocal 18 ............................. <oDateOut>
  [459] getlocal 12 ............................. <m>
  [461] pushint8 1 .............................. <1>
  [463] sub ..................................... <m - 1>
  [464] pusharglistnoret 2 ...................... <oDateOut, m - 1>
  [466] objcall 105 ............................. oDateOut.setMonth(m - 1)
  [468] getlocal 18 ............................. <oDateOut>
  [470] getlocal 11 ............................. <d>
  [472] pusharglistnoret 2 ...................... <oDateOut, d>
  [474] objcall 106 ............................. oDateOut.setDate(d)
  [476] getlocal 18 ............................. <oDateOut>
  [478] getlocal 14 ............................. <hr>
  [480] pusharglistnoret 2 ...................... <oDateOut, hr>
  [482] objcall 107 ............................. oDateOut.setHours(hr)
  [484] getlocal 18 ............................. <oDateOut>
  [486] getlocal 15 ............................. <mn>
  [488] pusharglistnoret 2 ...................... <oDateOut, mn>
  [490] objcall 108 ............................. oDateOut.setMinutes(mn)
  [492] getlocal 18 ............................. <oDateOut>
  [494] pushzero ................................ <0>
  [495] pusharglistnoret 2 ...................... <oDateOut, 0>
  [497] objcall 109 ............................. oDateOut.setSeconds(0)
  [499] getlocal 18 ............................. <oDateOut>
  [501] pusharglistnoret 1 ...................... <oDateOut>
  [503] extcall 18 .............................. return oDateOut
  [505] ret
end
